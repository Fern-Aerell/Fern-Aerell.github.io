const htmlElement=document.documentElement,savedTheme=localStorage.getItem("theme")||"light",figmaIcon=document.getElementById("figma_icon"),githubIcon=document.getElementById("github_icon"),manualBookIcon=document.getElementById("manual_book_icon"),toggleThemeIcon=document.getElementById("toggle_theme_icon");htmlElement.setAttribute("data-bs-theme",savedTheme),updateIconTheme();const output=document.getElementById("output"),buttons={clear:document.getElementById("button_clear"),delete:document.getElementById("button_delete"),equal:document.getElementById("button_equal"),comma:document.getElementById("button_coma"),percent:document.getElementById("button_percen"),positiveNegative:document.getElementById("button_positive_negative"),operators:{div:document.getElementById("button_div"),mul:document.getElementById("button_mul"),sub:document.getElementById("button_sub"),add:document.getElementById("button_add")},numbers:Array.from({length:10},(e,t)=>document.getElementById(`button_${t}`)),theme:document.getElementById("toggle_theme")},operators=["\xF7","x","-","+"];function clear(){output.innerText="0"}function recoveryFromError(){["-\u221E","\u221E","kesalahan"].includes(output.innerText.toLowerCase())&&clear()}function del(){if(recoveryFromError(),output.innerText.search("\\(-[0-9]+\\)$")!=-1){toggleSign();return}output.innerText=output.innerText.slice(0,-1)||0}function insertNumber(e){if(recoveryFromError(),!(output.innerText.search("%$")!=-1||output.innerText.search("\\)$")!=-1)){if(output.innerText.endsWith(",0")){output.innerText=output.innerText.slice(0,-1),output.innerText+=e;return}output.innerText=output.innerText==="0"?e:output.innerText+e}}function insertComma(){recoveryFromError(),output.innerText.search("[0-9]+,[0-9]+$")==-1&&output.innerText.search("[0-9]+$")!=-1&&(output.innerText+=",0")}function insertOperator(e){recoveryFromError(),operators.includes(output.innerText.slice(-1))&&del(),output.innerText+=e}function calculate(){if(recoveryFromError(),output.innerText=="20112005"){output.innerText="Fern Aerell";return}output.innerText.length>0&&(output.innerText=evaluation(output.innerText))}function insertPercent(){recoveryFromError(),output.innerText.length>0&&output.innerText.search("([0-9]+|[0-9]+,[0-9]+)%$")==-1&&(output.innerText+="%")}function toggleSign(){if(recoveryFromError(),output.innerText==0)return;const e=output.innerText.search("([0-9]+|[0-9]+,[0-9]+)$");if(e!=-1){output.innerText=output.innerText.slice(0,e)+"(-"+output.innerText.slice(e)+")";return}const t=output.innerText.search("\\(-([0-9]+|[0-9]+,[0-9]+)\\)$");if(t!=-1){output.innerText=output.innerText.slice(0,t)+output.innerText.slice(t).substring(2,output.innerText.slice(t).length-1);return}}function evaluation(expression){try{return String(eval(expression.replaceAll("%","/100").replaceAll("\xF7","/").replaceAll("x","*").replaceAll(",",".").replaceAll("Fern Aerell","20112005"))).replaceAll(".",",").replaceAll("Infinity","\u221E").replaceAll("NaN","Kesalahan")}catch{return expression}}document.addEventListener("keydown",function(e){if(e.key.search("^[0-9]$")!=-1){e.preventDefault(),insertNumber(e.key);return}if(e.ctrlKey&&e.key=="-"){e.preventDefault(),toggleSign();return}if(e.shiftKey&&["+","*"].includes(e.key)||["+","*","-","x","/","\xF7"].includes(e.key)){e.preventDefault();let t=e.key;t=="*"?t="x":t=="/"&&(t="\xF7"),insertOperator(t);return}if(e.key=="%"){e.preventDefault(),insertPercent();return}if([",","."].includes(e.key)){e.preventDefault(),insertComma();return}if(["=","Enter"].includes(e.key)){e.preventDefault(),calculate();return}if(["Delete","Backspace","Escape"].includes(e.key)){e.preventDefault(),e.ctrlKey||e.key=="Escape"?clear():del();return}});function updateIconTheme(){const e=htmlElement.getAttribute("data-bs-theme");figmaIcon.src=e==="light"?"images/figma-icon-dark.webp":"images/figma-icon-light.webp",githubIcon.src=e==="light"?"images/github-icon-dark.webp":"images/github-icon-light.webp",manualBookIcon.src=e==="light"?"images/manual-book-icon-dark.webp":"images/manual-book-icon-light.webp",toggleThemeIcon.src=e==="light"?"images/dark-light-mode-button-icon-dark.webp":"images/dark-light-mode-button-icon-light.webp"}function toggleTheme(){const t=htmlElement.getAttribute("data-bs-theme")==="light"?"dark":"light";htmlElement.setAttribute("data-bs-theme",t),localStorage.setItem("theme",t),updateIconTheme()}buttons.clear.addEventListener("click",()=>clear()),buttons.delete.addEventListener("click",()=>del()),buttons.equal.addEventListener("click",()=>calculate()),buttons.comma.addEventListener("click",()=>insertComma()),buttons.percent.addEventListener("click",()=>insertPercent()),buttons.positiveNegative.addEventListener("click",()=>toggleSign()),buttons.numbers.forEach((e,t)=>e.addEventListener("click",()=>insertNumber(t))),Object.values(buttons.operators).forEach((e,t)=>e.addEventListener("click",()=>insertOperator(operators[t]))),buttons.theme.addEventListener("click",()=>toggleTheme());
